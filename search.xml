<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Docker部署青龙</title>
      <link href="/2022/01/26/8/"/>
      <url>/2022/01/26/8/</url>
      
        <content type="html"><![CDATA[<h2 id="青龙部署"><a href="#青龙部署" class="headerlink" title="青龙部署"></a>青龙部署</h2><p>1.拉取镜像，这里提供两个版本。</p><pre><code>官方镜像：docker pull whyour/qinglong:latest个人备份：docker pull cyblh/qinglong:latest  #官方2.10.13版本</code></pre><p>2.命令部署</p><pre><code>docker run -dit \-v $pwd/ql/config:/ql/config \-v $pwd/ql/log:/ql/log \-v $pwd/ql/db:/ql/db \-v $pwd/ql/scripts:/ql/scripts \-p 5700:5700 \-e ENABLE_HANGUP=true \-e ENABLE_WEB_PANEL=true \--name qinglong \--hostname qinglong \--restart always \whyour/qinglong:latestcyblh/qinglong:latest  #备份镜像使用这里替换倒数第二行</code></pre><p><em>说明：冒号前为本地映射出来的文件，可以更改。</em></p>]]></content>
      
      
      <categories>
          
          <category> 折腾笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sillyGirl对接QQBOT</title>
      <link href="/2022/01/23/7/"/>
      <url>/2022/01/23/7/</url>
      
        <content type="html"><![CDATA[<h2 id="sillyGirl安装"><a href="#sillyGirl安装" class="headerlink" title="sillyGirl安装"></a>sillyGirl安装</h2><p>一键命令：</p><pre><code>s=sillyGirl;a=arm64;if [[ $(uname -a | grep &quot;x86_64&quot;) != &quot;&quot; ]];then a=amd64;fi ;if [ ! -d $s ];then mkdir $s;fi ;cd $s;wget http://github.yanyuge.workers.dev/https://github.com/cdle/$&#123;s&#125;/releases/download/main/$&#123;s&#125;_linux_$a -O $s &amp;&amp; chmod 777 $s;pkill -9 $s;$(pwd)/$s</code></pre><p>一键命令如不可用，请下载文末附件</p><p>Continue~</p><h2 id="对接Node-Onebot"><a href="#对接Node-Onebot" class="headerlink" title="对接Node-Onebot"></a>对接Node-Onebot</h2><p>1.一次性清除占用80端口的应用</p><pre><code>lsof -i :80|grep -v &quot;PID&quot;|awk &#39;&#123;print &quot;kill -9&quot;,$2&#125;&#39;|sh</code></pre><p>2.安装Node.js</p><pre><code>mkdir nodejs &amp;&amp; cd nodejs &amp;&amp; wget https://nodejs.org/dist/v16.13.1/node-v16.13.1-linux-x64.tar.xz</code></pre><p>3.解压并安装</p><pre><code>xz -d node-v16.13.1-linux-x64.tar.xz  tar -xvf node-v16.13.1-linux-x64.tar  #与上面分开执行</code></pre><p>4.配置环境变量</p><pre><code>vi /etc/profile  #打开配置文件#复制下面两行到配置文件里export NODEJS_HOME=/root/nodejs/node-v16.13.1-linux-x64export PATH=$PATH:$NODEJS_HOME/bin</code></pre><p>5.使环境变量生效并检查</p><pre><code>source /etc/profilenode -v  #与上面分开执行</code></pre><p>6.拉取Onebot</p><pre><code>git clone https://github.com/takayama-lily/node-onebot.gitcd node-onebot &amp;&amp; cp config.sample.js config.js  #与上面分开执行</code></pre><p>7.修改config.js</p><p>模板</p><pre><code>&quot;use strict&quot;;// 将此文件更名为config.js才能生效哦module.exports = &#123;    //通用配置    general: &#123;        platform:           1,      //1:安卓手机 2:aPad 3:安卓手表 4:MacOS 5:iPad        debug:              false,  //开启debug        use_cqhttp_notice:  true,   //是否使用cqhttp标准的notice事件格式        host:               &quot;localhost&quot;,  //监听主机名        port:               5700,       //端口        use_http:           false,      //启用http        use_ws:             false,      //启用正向ws，和http使用相同地址和端口        access_token:       &quot;&quot;,         //访问api的token        secret:             &quot;&quot;,         //上报数据的sha1签名密钥        post_timeout:       30,         //post超时时间(秒)        post_message_format:&quot;array&quot;,    //&quot;string&quot;或&quot;array&quot;        enable_cors:        false,      //是否允许跨域请求        enable_heartbeat:   false,      //是否启用ws心跳        heartbeat_interval: 15000,      //ws心跳间隔(毫秒)        rate_limit_interval:500,        //使用_rate_limited后缀限速调用api的排队间隔时间(毫秒)        event_filter:       &quot;&quot;,         //json格式的事件过滤器文件路径        post_url: [ //上报地址，可以添加多个url            // &quot;http://your.address.com:80&quot;,        ],        ws_reverse_url: [ //反向ws地址，可以添加多个url            &quot;ws://localhost:8080/qq/receive&quot;,        ],        ws_reverse_reconnect_interval: 3000, //反向ws断线重连间隔(毫秒)，设为负数直接不重连        ws_reverse_reconnect_on_code_1000: true, //反向ws是否在关闭状态码为1000的时候重连    &#125;,    //每个账号的单独配置(用于覆盖通用配置)    123456789: &#123;    &#125;,&#125;;</code></pre><p>8.启动Onrbot</p><pre><code>node main QQ号</code></pre><p>9.使用PM2驻守</p><pre><code>pm2 start &quot;node main QQ号&quot;</code></pre><p>Continue~</p><h2 id="PM2的安装"><a href="#PM2的安装" class="headerlink" title="PM2的安装"></a>PM2的安装</h2><p>1.全局安装</p><pre><code>npm install pm2 -g</code></pre><p>2.</p><p>设置软连接</p><pre><code>ln -sf /usr/node/bin/pm2 /usr/local/bin/</code></pre><p>3.查看进程</p><pre><code>pm2 list </code></pre><p>附件：</p><p><a href="http://pan.cyblh.top/61117363.7z">sillyGirl</a>  <em>说明：root开头文件解压后放于root目录，etc开头文件解压后放于etc。</em></p><p><a href="http://pan.cyblh.top/61117575.7z">Onebot</a>  <em>说明：文件解压后放于root目录。</em></p><blockquote><p>解压密码为123</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 折腾笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> QQBOT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>腾讯云安装Docker</title>
      <link href="/2022/01/20/1/"/>
      <url>/2022/01/20/1/</url>
      
        <content type="html"><![CDATA[<p>1.更新yum包</p><pre><code>yum -y update</code></pre><p>2.检测yum-utils状态</p><pre><code>yum list installed | grep yum-utils</code></pre><p>3.设置yum源：</p><pre><code>sudo yum-config-manager \    --add-repo \    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code></pre><p>4.安卓Docker Engine，验证是否安装成功，并启动</p><pre><code>yum install -y docker-ce docker-ce-cli containerd.io  #第一条命令docker -v  #第二条命令systemctl start docker  #第三条命令</code></pre><p>5.修改下载源，不修改会导致下载速度很慢</p><pre><code>sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;&#123;  &quot;registry-mirrors&quot;: [&quot;https://plut5gv2.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker</code></pre>]]></content>
      
      
      <categories>
          
          <category> 折腾笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>老屋</title>
      <link href="/2022/01/06/4/"/>
      <url>/2022/01/06/4/</url>
      
        <content type="html"><![CDATA[<p>老屋已经彻底垮塌了。那是我童年生活的地方，我也在哪里经历了第一次别离。</p><p>遥记那是2008年的夏天，奶奶去世了。小时顽劣，一天胡闹下来浑身都是汗。洗澡要坐在一个大锡盆中，在昏暗的屋檐下忍受成群结队的蚊子叮咬。有一个傍晚，奶奶追着让我洗澡，讨厌洗澡的我欺她年迈，脱口而出:“你死了我也不会流一滴眼泪。”</p><p>谁能料到不久之后，急性糖尿病缠上了她。奶奶住院了，我被大人去看她。她躺在病床上却对我危险，还递给我葡萄和苹果。这是我的诅咒，是报应，当时的我害怕是因为我的出言不逊才让她遭此一劫。</p><p>我一边剥着葡萄塞入嘴里，一边回想着以往。面条里面的荷包蛋，奶奶锁在柜子的劣质糖果，是童年里为数不多的甜蜜。酸甜的葡萄混杂着深深的愧疚，我坐在病床前不敢抬头。</p><p>过了两天，得知她的死讯，只记得我坐在祠堂的高门槛上，泪如雨下。</p><p>老屋和祠堂紧贴着，祠堂没有大门，只有高高供奉的菩萨和门槛。奶奶的冰柜就停在祠堂里，做白事的那些天，爷爷一直在沉默。</p><p>爷爷是个篾匠，从我记事以来，他就编背篓和簸箕。我用他的蔑刀砍竹子，做宝剑。破竹子需要垫子，所以祠堂的木门槛到处都是刀痕。</p><p>后来，我离开家乡去上学。听闻有人要买祠堂里的那个菩萨，说是鎏金的，出十万。家乡人不愿卖，第二天那个被香火熏得黑漆漆的菩萨就被偷走了。只剩一个空空的神龛每日接受供拜。</p><p>再后来，爷爷也从老屋搬了出来。失去烟火气的老屋塌了，只剩下破砖残瓦，野草和青苔猛长。</p><p>一次大雨，祠堂门口的水渠积攒的雨水清澈见底。我坐在屋檐下的青石板，赤足去拨弄水渠里的泥沙，像一尾游鱼不甘寂寞，让尘埃翻滚，浑浊了一渠清水，也浑浊了我的一生。</p>]]></content>
      
      
      <categories>
          
          <category> 分享故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 一些故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《红楼梦》有感</title>
      <link href="/2021/12/21/2/"/>
      <url>/2021/12/21/2/</url>
      
        <content type="html"><![CDATA[<p>今天早上洗澡的时候，忽然想起《红楼梦》来，想起宝玉与黛玉与宝钗的爱情来，我一向是赞同金玉良缘，不看好木石前盟的。因为我觉得黛玉不适合结婚，而宝钗大方，善于处理人际关系，可以扶持丈夫。可是今天我忽然明白了宝玉出家的原因，如果不爱，再合适又有什么用呢？在这吉光片羽的开示下，我深深地深深地为宝玉和黛玉难过，这是我读《红楼梦》以来第一次如此。</p><p>如果你觉得这很平常，那你应该看看以前的我，那时和人讨论他们三个人之间的爱情，我都是坚定的金玉良缘派，我的理由有许多，每一个理由都是站得住脚的，我想和我坚持一样观点的人也是如此的，都能说出一套套的观点。可是现在回想，那时我们恰好忘了一件事，当我们说这些的时候，我们只是站在自己角度，站在现实基础上来考虑的，从来没有站在宝玉黛玉，站在爱情的位置上考虑过。如果站在你面前的那个人，是你这一生最爱最爱的人，如果不能和她在一起，无论代替的那个人是多么多么好，都是伤感的，都是伤心的。如果那个人你永远错过，永远拥有不到，这是多么多么让人难过啊。</p><p>可是那时的我并没有想到这些，我并不是唯利是图，追逐利益的人，可是像我这样的人，多少有点不相信爱情，多少有点想向现实妥协来显示自己的成熟。于是我罔顾了自己的心，罔顾了宝玉爱着黛玉，黛玉爱着宝玉的那颗“只有你才好”的心。</p><p>宝钗自然是极好极好的人，配宝玉是绰绰有余的，可是她不爱宝玉，宝玉也不爱她，对宝钗来说，贾宝玉甄宝玉又有什么不同？可是对于宝玉来说，张黛玉林黛玉，他只爱着林黛玉。</p><p>我想我是不是太过于实用主义，太过于要把自己变得现实而标榜自己成熟了？我真羡慕那些一开始就对黛玉抱着好感，对宝玉和黛玉抱着同情心的人，这些人应该更具有同理心同情心吧，他们从来没有在爱情和现实之间摇摆过，他们的终心和初心都是一样的。</p><p>可是我又深深为自己感到幸运，在今天，在那弹指一瞬间，那种伤感完全弥漫开来，将我完完整整地包裹住，就像是我洗澡时那充沛的热水，完完整整地包裹住了我。而我真想为宝玉和黛玉大哭一场。我无法想象黛玉知道了宝玉娶的是宝钗不是自己时的那种肝肠寸断，也不敢想象宝玉知道黛玉再也不在人世间时的那种心碎，我理解他们太晚了一些。</p><p>可是他们又哪里害怕别人理解他们晚呢，早理解了，他们是那样，晚理解了，他们还是那样，就算是始终不理解，他们也还是那样。可是这于我却是不一样的，我到底少了一丝戾气，多了一点真情。</p>]]></content>
      
      
      <categories>
          
          <category> 杂七杂八 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>活着</title>
      <link href="/2021/12/16/3/"/>
      <url>/2021/12/16/3/</url>
      
        <content type="html"><![CDATA[<p>十七年前春节前夕的一个晚上，我们一家子缩在炮弹炉旁边烤火。</p><p>我不知道发生了什么，只记得他们两个人突然喊得很大声，坐的板凳变成了趁手的武器。我妈把我抓起来穿上棉袄，只一推就把我送到了院子里，然后她转身投入战场去了。</p><p>我的脑子还小到无法理解发生了什么。只记得雪很大，灌进脖子里很冷。天很黑，屋里的灯映出板凳飞舞的轮廓。邻居们出来了，他们看看屋子里又看看我。他们看我的眼神很尖，扎得我很疼。</p><p>后来我大了就知道，家里很窘，用度成问题，官司缠身。打架是为了钱。但是我不懂，难道打一架就可以奇迹一样地从对方身上打出钱来。打架到底不能赚钱，我们还是很穷。他们到底离婚了，我感到很解脱。我妈带着我搬走了，那个男人没有给过我巴掌和胡扯以外的东西，我感到很解脱。但我还是对别人的眼睛过敏，这个毛病到现在我也没改掉，这让我痛苦。</p><p>现在我大学即将毕业了，我突然知道那个男人手术失败瞎了一只眼。他现在很穷，无人照顾，再这样下去很有可能没有几年好活了，我心里很乱，我不知道该怎么办。我妈也是，她到底心软想要接他回来照顾。但是我不知道该用什么表情面对这一切。</p><p>窗子外面天雾蒙蒙，雪点子轻轻敲打着窗户，落到地上搅和成一团烂泥。活着真的很受罪。就像在烂泥里深一脚浅一脚的前进。往前望望一片黑。往后望望，每一个脚印里都灌满了眼泪。</p>]]></content>
      
      
      <categories>
          
          <category> 分享故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 一些故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>公道</title>
      <link href="/2021/12/08/9/"/>
      <url>/2021/12/08/9/</url>
      
        <content type="html"><![CDATA[<p>我们一家子（那时还没散）坐上摇摇晃晃的公交，去到遥远的人民法院办事。我爸郑重的对我说：“你到了就坐在大厅里使劲地哭。”</p><p>我感觉很滑稽，法院是讲理的地方，你却让我干这么不讲理的事，我不捧你的场。</p><p>我们经过有三个人把守的带金属探测器的门，进到法院的大厅。从楼梯上下来了一个一团和气的年轻人，他就和我们一家子笑眯眯地谈话，我听不懂他们在说什么，什么小产权房大产权房，有效无效的。但是我当时已经明白了，笑眯眯不一定是好事。有时候笑眯眯地谈话等同于打了一架，有时候又等于什么都没谈，如果涉及到钱或者酒，变数就更多。这其中的奥妙我又弄不分明了。大人的世界总是很疯狂，连一个笑脸都这么复杂。</p><p>这时候飞进来了一个老太太，她的腰特别弯，给我留下了刻骨的印象。她身体就像一把手枪一样，她手枪一样的身体却像子弹一样在大厅里弹射，她手上捧着个红本子撵到一个窗口底下，大喊道：</p><p>“我的儿子讨薪被黑老板雇人打成残疾，我来讨公道！”</p><p>窗口里的人把头低下去，也把身子弯成一把手枪，不理她。她连续这样了三次，大厅里就有了四把手枪。她环顾四周之后看到了我们这一桌人，她就猛地扑过来，把红色的本本（我不知道是什么）直塞到年轻人鼻子底下：“我来讨公道！”</p><p>他就把眼睛翻上去，这时候我对他产生畏惧了，别人都得弯成手枪，而他可以把眼睛翻上去，他显然是更高级的人。他翻完眼睛后就向我们一家子笑了笑，打发我们先走，我们就知趣的走了，我们是不敢得罪高级人的。但是我双亲的脸色很难看，我就知道这次笑眯眯地谈话顶好也是等于没谈了。我回头去看那个老太太，她很弯，很低，她双手托着红本本像上供。但我觉得她很硬，她可能比整个楼里所有人加起来都要硬吧。后来我爸告诉我，他十次来法院倒有九次能见到那个老太太，九次里有九次和今天的事一模一样。“她把咱们都牵连啦！连累的咱们都办不成事！”，他愤慨得很，“你儿子叫人家打了，你让法官有什么办法？”</p><p>我惊异地发现原来法院里找不到办法，那我们还来干什么？这些奇妙的概念上的冲突，把我的脑子都搞坏了，该讲理而要我哭闹撒泼，向没有办法的人寻找办法，明明笑着却又没笑，明明谈得和睦却又什么都没说。这着实让小小的我没有办法。</p><p>那天的天气很晴朗，蓝天白云，一个艳艳的太阳。法院建筑旁边的绿化带里开着鲜艳的红花，是一个看起来明亮热情的世界。这里的美景足以匹敌一个公园。一群人正在散步，他们目送着我们一家人，走进飘摇的风雨。</p>]]></content>
      
      
      <categories>
          
          <category> 分享故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 一些故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>技术于人</title>
      <link href="/2021/11/21/6/"/>
      <url>/2021/11/21/6/</url>
      
        <content type="html"><![CDATA[<p>赛博朋克实质上是技术的异化。</p><p>人们使用技术的目的是为人服务，但科技的发展为垄断的产生提供了土壤、大数据及衍生技术的发展将人笼罩在信息化的铁幕下——科技的发展没有解放人、发展人、保护人，甚至于成为一种异己的、敌对的力量，危害社会、反制人类。</p><p>以互联网行业为例，它风卷残云般席卷一个又一个传统行业。多年前我就感觉到，技术上带来的便利消费者都是要连本带利去还的，这把双刃剑永远是弊大于利。在你无意识中，就剥夺了你作为人的尊严，你只是一个由数据构成的综合体，而资本则在计算着你还有多少剩余价值。你甚至没有自主选择的权利，你以为你的网购决策是自己做的，其实是平台帮你做的，你甚至都没意识到。互联网的广告业真是人人得而诛之</p><p>科技的发展同时缩短了人与人之间的距离，在大数据及智能推送算法的聚类与过滤之下，人们只能看到自己乐意看到的内容，一个社群内传播的内容不一定会在另一个社群内受欢迎，这导致平行文化和过滤气泡，主流仅仅存在于社群内部，区别于社群主流的异见者被筛选在社群之外，呈现社群外的边缘化趋向，这样的受众分化意味着公共空间的终结，是社会极化的标志，但最终边缘化也促成了稳定，人们被笼罩在信息技术控制下的巨大铁幕之中。</p>]]></content>
      
      
      <categories>
          
          <category> 杂七杂八 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 思考 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器挂载蓝奏云</title>
      <link href="/2021/11/12/5/"/>
      <url>/2021/11/12/5/</url>
      
        <content type="html"><![CDATA[<h1 id="部署源码"><a href="#部署源码" class="headerlink" title="部署源码"></a>部署源码</h1><p>在WWW下部署好网页源码。</p><p>附件会提供下载。</p><h2 id="获取蓝奏云的COOKIE"><a href="#获取蓝奏云的COOKIE" class="headerlink" title="获取蓝奏云的COOKIE"></a>获取蓝奏云的COOKIE</h2><p>登录到蓝奏云的控制台里，执行如下命令</p><pre><code>if(!/(^|\.)woozooo\.com$/i.test(document.location.host))    throw new Error(&#39;请登录到蓝奏云控制台在执行此代码！&#39;);var regex = /(?&lt;=^|;)\s*([^=]+)=\s*(.+?)\s*(?=;|$)/g,    cookies = &#123;&#125;,re;while(re = regex.exec(document.cookie))    if(re[1] === &#39;ylogin&#39;||re[1] === &#39;phpdisk_info&#39;)        cookies[re[1]] = re[1]+&#39;=&#39;+re[2]+&#39;;&#39;;if(!cookies.hasOwnProperty(&#39;phpdisk_info&#39;))    throw new Error(&#39;获取cookie失败，请确认您已登录到蓝奏云控制台！&#39;);var copy = function (str) &#123;    var oInput = document.createElement(&#39;input&#39;);    oInput.value = str;    document.body.appendChild(oInput);    oInput.select();    document.execCommand(&quot;Copy&quot;);    oInput.remove();    alert(&#39;复制成功&#39;);&#125;copy(Object.values(cookies).join(&#39; &#39;));</code></pre><p>显示复制成功后，将源码中的cookie替换为自己的。</p><h2 id="配置网站伪静态"><a href="#配置网站伪静态" class="headerlink" title="配置网站伪静态"></a>配置网站伪静态</h2><p>Nginx配置：</p><pre><code>if (!-e $request_filename) &#123;    rewrite ^/(-1|\d+|[bi][a-zA-Z0-9]+)(\.[\w]+|/([^/]+))?$ /api.php?id=$1&amp;name=$3 break;&#125;</code></pre><p>Apache配置：</p><pre><code>RewriteEngine OnRewriteCond %&#123;REQUEST_FILENAME&#125; !-dRewriteCond %&#123;REQUEST_FILENAME&#125; !-fRewriteRule ^(-1|\d+|[bi][a-zA-Z0-9]+)(\.\w+|/([^/]+))?$ /api.php?id=$1&amp;name=$3 [QSA,L]</code></pre><p>附件：</p><p><a href="http://pan.cyblh.top/61189238.zip">网页源码</a>  <em>说明：可用宝塔部署。</em></p><blockquote><p>解压密码为123</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 折腾笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改微信、支付宝步数</title>
      <link href="/2021/10/26/10/"/>
      <url>/2021/10/26/10/</url>
      
        <content type="html"><![CDATA[<h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><pre><code># -*- coding: utf8 -*-# python版本 &gt;=3.8 import requests,time,re,json,random now = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())headers = &#123;        &#39;User-Agent&#39;: &#39;Dalvik/2.1.0 (Linux; U; Android 9; MI 6 MIUI/20.6.18)&#39;        &#125;  #获取登录codedef get_code(location):    code_pattern = re.compile(&quot;(?&lt;=access=).*?(?=&amp;)&quot;)    code = code_pattern.findall(location)[0]    return code  #登录def login(user,password):    url1 = &quot;https://api-user.huami.com/registrations/+86&quot; + user + &quot;/tokens&quot;    headers = &#123;        &quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;,    &quot;User-Agent&quot;:&quot;MiFit/4.6.0 (iPhone; iOS 14.0.1; Scale/2.00)&quot;        &#125;    data1 = &#123;        &quot;client_id&quot;:&quot;HuaMi&quot;,        &quot;password&quot;:f&quot;&#123;password&#125;&quot;,        &quot;redirect_uri&quot;:&quot;https://s3-us-west-2.amazonaws.com/hm-registration/successsignin.html&quot;,        &quot;token&quot;:&quot;access&quot;        &#125;    r1 = requests.post(url1,data=data1,headers=headers,allow_redirects=False)    try:        location = r1.headers[&quot;Location&quot;]        code = get_code(location)    except:        return 0,0    #print(&quot;access_code获取成功！&quot;)    #print(code)          url2 = &quot;https://account.huami.com/v2/client/login&quot;    data2 = &#123;        &quot;app_name&quot;:&quot;com.xiaomi.hm.health&quot;,        &quot;app_version&quot;:&quot;4.6.0&quot;,        &quot;code&quot;:f&quot;&#123;code&#125;&quot;,        &quot;country_code&quot;:&quot;CN&quot;,        &quot;device_id&quot;:&quot;2C8B4939-0CCD-4E94-8CBA-CB8EA6E613A1&quot;,        &quot;device_model&quot;:&quot;phone&quot;,        &quot;grant_type&quot;:&quot;access_token&quot;,        &quot;third_name&quot;:&quot;huami_phone&quot;,        &#125;     r2 = requests.post(url2,data=data2,headers=headers).json()    login_token = r2[&quot;token_info&quot;][&quot;login_token&quot;]    #print(&quot;login_token获取成功！&quot;)    #print(login_token)    userid = r2[&quot;token_info&quot;][&quot;user_id&quot;]    #print(&quot;userid获取成功！&quot;)    #print(userid)      return login_token,userid  #主函数def main(user, passwd, step):    user = str(user)    password = str(passwd)    step = str(step)    if user == &#39;&#39; or password == &#39;&#39;:        print (&quot;用户名或密码不能为空！&quot;)        return &quot;user and passwd not empty！&quot;         if step == &#39;&#39;:        print (&quot;已设置为随机步数（24000-25000）&quot;)        step = str(random.randint(16000,16500))    login_token = 0    login_token,userid = login(user,password)    if login_token == 0:        print(&quot;登陆失败！&quot;)        return &quot;login fail!&quot;      t = get_time()          app_token = get_app_token(login_token)      today = time.strftime(&quot;%F&quot;)      data_json = &#39;%5B%7B%22data_hr%22%3A%22%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9L%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FVv%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0v%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9e%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0n%5C%2Fa%5C%2F%5C%2F%5C%2FS%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0b%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F1FK%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FR%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9PTFFpaf9L%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FR%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0j%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9K%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FOv%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2Fzf%5C%2F%5C%2F%5C%2F86%5C%2Fzr%5C%2FOv88%5C%2Fzf%5C%2FPf%5C%2F%5C%2F%5C%2F0v%5C%2FS%5C%2F8%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FSf%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2Fz3%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0r%5C%2FOv%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FS%5C%2F9L%5C%2Fzb%5C%2FSf9K%5C%2F0v%5C%2FRf9H%5C%2Fzj%5C%2FSf9K%5C%2F0%5C%2F%5C%2FN%5C%2F%5C%2F%5C%2F%5C%2F0D%5C%2FSf83%5C%2Fzr%5C%2FPf9M%5C%2F0v%5C%2FOv9e%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FS%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2Fzv%5C%2F%5C%2Fz7%5C%2FO%5C%2F83%5C%2Fzv%5C%2FN%5C%2F83%5C%2Fzr%5C%2FN%5C%2F86%5C%2Fz%5C%2F%5C%2FNv83%5C%2Fzn%5C%2FXv84%5C%2Fzr%5C%2FPP84%5C%2Fzj%5C%2FN%5C%2F9e%5C%2Fzr%5C%2FN%5C%2F89%5C%2F03%5C%2FP%5C%2F89%5C%2Fz3%5C%2FQ%5C%2F9N%5C%2F0v%5C%2FTv9C%5C%2F0H%5C%2FOf9D%5C%2Fzz%5C%2FOf88%5C%2Fz%5C%2F%5C%2FPP9A%5C%2Fzr%5C%2FN%5C%2F86%5C%2Fzz%5C%2FNv87%5C%2F0D%5C%2FOv84%5C%2F0v%5C%2FO%5C%2F84%5C%2Fzf%5C%2FMP83%5C%2FzH%5C%2FNv83%5C%2Fzf%5C%2FN%5C%2F84%5C%2Fzf%5C%2FOf82%5C%2Fzf%5C%2FOP83%5C%2Fzb%5C%2FMv81%5C%2FzX%5C%2FR%5C%2F9L%5C%2F0v%5C%2FO%5C%2F9I%5C%2F0T%5C%2FS%5C%2F9A%5C%2Fzn%5C%2FPf89%5C%2Fzn%5C%2FNf9K%5C%2F07%5C%2FN%5C%2F83%5C%2Fzn%5C%2FNv83%5C%2Fzv%5C%2FO%5C%2F9A%5C%2F0H%5C%2FOf8%5C%2F%5C%2Fzj%5C%2FPP83%5C%2Fzj%5C%2FS%5C%2F87%5C%2Fzj%5C%2FNv84%5C%2Fzf%5C%2FOf83%5C%2Fzf%5C%2FOf83%5C%2Fzb%5C%2FNv9L%5C%2Fzj%5C%2FNv82%5C%2Fzb%5C%2FN%5C%2F85%5C%2Fzf%5C%2FN%5C%2F9J%5C%2Fzf%5C%2FNv83%5C%2Fzj%5C%2FNv84%5C%2F0r%5C%2FSv83%5C%2Fzf%5C%2FMP%5C%2F%5C%2F%5C%2Fzb%5C%2FMv82%5C%2Fzb%5C%2FOf85%5C%2Fz7%5C%2FNv8%5C%2F%5C%2F0r%5C%2FS%5C%2F85%5C%2F0H%5C%2FQP9B%5C%2F0D%5C%2FNf89%5C%2Fzj%5C%2FOv83%5C%2Fzv%5C%2FNv8%5C%2F%5C%2F0f%5C%2FSv9O%5C%2F0ZeXv%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F1X%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9B%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2FTP%5C%2F%5C%2F%5C%2F1b%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F0%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F9N%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2F%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%5C%2Fv7%2B%22%2C%22date%22%3A%222021-08-07%22%2C%22data%22%3A%5B%7B%22start%22%3A0%2C%22stop%22%3A1439%2C%22value%22%3A%22UA8AUBQAUAwAUBoAUAEAYCcAUBkAUB4AUBgAUCAAUAEAUBkAUAwAYAsAYB8AYB0AYBgAYCoAYBgAYB4AUCcAUBsAUB8AUBwAUBIAYBkAYB8AUBoAUBMAUCEAUCIAYBYAUBwAUCAAUBgAUCAAUBcAYBsAYCUAATIPYD0KECQAYDMAYB0AYAsAYCAAYDwAYCIAYB0AYBcAYCQAYB0AYBAAYCMAYAoAYCIAYCEAYCYAYBsAYBUAYAYAYCIAYCMAUB0AUCAAUBYAUCoAUBEAUC8AUB0AUBYAUDMAUDoAUBkAUC0AUBQAUBwAUA0AUBsAUAoAUCEAUBYAUAwAUB4AUAwAUCcAUCYAUCwKYDUAAUUlEC8IYEMAYEgAYDoAYBAAUAMAUBkAWgAAWgAAWgAAWgAAWgAAUAgAWgAAUBAAUAQAUA4AUA8AUAkAUAIAUAYAUAcAUAIAWgAAUAQAUAkAUAEAUBkAUCUAWgAAUAYAUBEAWgAAUBYAWgAAUAYAWgAAWgAAWgAAWgAAUBcAUAcAWgAAUBUAUAoAUAIAWgAAUAQAUAYAUCgAWgAAUAgAWgAAWgAAUAwAWwAAXCMAUBQAWwAAUAIAWgAAWgAAWgAAWgAAWgAAWgAAWgAAWgAAWREAWQIAUAMAWSEAUDoAUDIAUB8AUCEAUC4AXB4AUA4AWgAAUBIAUA8AUBAAUCUAUCIAUAMAUAEAUAsAUAMAUCwAUBYAWgAAWgAAWgAAWgAAWgAAWgAAUAYAWgAAWgAAWgAAUAYAWwAAWgAAUAYAXAQAUAMAUBsAUBcAUCAAWwAAWgAAWgAAWgAAWgAAUBgAUB4AWgAAUAcAUAwAWQIAWQkAUAEAUAIAWgAAUAoAWgAAUAYAUB0AWgAAWgAAUAkAWgAAWSwAUBIAWgAAUC4AWSYAWgAAUAYAUAoAUAkAUAIAUAcAWgAAUAEAUBEAUBgAUBcAWRYAUA0AWSgAUB4AUDQAUBoAXA4AUA8AUBwAUA8AUA4AUA4AWgAAUAIAUCMAWgAAUCwAUBgAUAYAUAAAUAAAUAAAUAAAUAAAUAAAUAAAUAAAUAAAWwAAUAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAeSEAeQ8AcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcBcAcAAAcAAAcCYOcBUAUAAAUAAAUAAAUAAAUAUAUAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcCgAeQAAcAAAcAAAcAAAcAAAcAAAcAYAcAAAcBgAeQAAcAAAcAAAegAAegAAcAAAcAcAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcCkAeQAAcAcAcAAAcAAAcAwAcAAAcAAAcAIAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcCIAeQAAcAAAcAAAcAAAcAAAcAAAeRwAeQAAWgAAUAAAUAAAUAAAUAAAUAAAcAAAcAAAcBoAeScAeQAAegAAcBkAeQAAUAAAUAAAUAAAUAAAUAAAUAAAcAAAcAAAcAAAcAAAcAAAcAAAegAAegAAcAAAcAAAcBgAeQAAcAAAcAAAcAAAcAAAcAAAcAkAegAAegAAcAcAcAAAcAcAcAAAcAAAcAAAcAAAcA8AeQAAcAAAcAAAeRQAcAwAUAAAUAAAUAAAUAAAUAAAUAAAcAAAcBEAcA0AcAAAWQsAUAAAUAAAUAAAUAAAUAAAcAAAcAoAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAYAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcBYAegAAcAAAcAAAegAAcAcAcAAAcAAAcAAAcAAAcAAAeRkAegAAegAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAEAcAAAcAAAcAAAcAUAcAQAcAAAcBIAeQAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcBsAcAAAcAAAcBcAeQAAUAAAUAAAUAAAUAAAUAAAUBQAcBYAUAAAUAAAUAoAWRYAWTQAWQAAUAAAUAAAUAAAcAAAcAAAcAAAcAAAcAAAcAMAcAAAcAQAcAAAcAAAcAAAcDMAeSIAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcAAAcBQAeQwAcAAAcAAAcAAAcAMAcAAAeSoAcA8AcDMAcAYAeQoAcAwAcFQAcEMAeVIAaTYAbBcNYAsAYBIAYAIAYAIAYBUAYCwAYBMAYDYAYCkAYDcAUCoAUCcAUAUAUBAAWgAAYBoAYBcAYCgAUAMAUAYAUBYAUA4AUBgAUAgAUAgAUAsAUAsAUA4AUAMAUAYAUAQAUBIAASsSUDAAUDAAUBAAYAYAUBAAUAUAUCAAUBoAUCAAUBAAUAoAYAIAUAQAUAgAUCcAUAsAUCIAUCUAUAoAUA4AUB8AUBkAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAAfgAA%22%2C%22tz%22%3A32%2C%22did%22%3A%22DA932FFFFE8816E7%22%2C%22src%22%3A24%7D%5D%2C%22summary%22%3A%22%7B%5C%22v%5C%22%3A6%2C%5C%22slp%5C%22%3A%7B%5C%22st%5C%22%3A1628296479%2C%5C%22ed%5C%22%3A1628296479%2C%5C%22dp%5C%22%3A0%2C%5C%22lt%5C%22%3A0%2C%5C%22wk%5C%22%3A0%2C%5C%22usrSt%5C%22%3A-1440%2C%5C%22usrEd%5C%22%3A-1440%2C%5C%22wc%5C%22%3A0%2C%5C%22is%5C%22%3A0%2C%5C%22lb%5C%22%3A0%2C%5C%22to%5C%22%3A0%2C%5C%22dt%5C%22%3A0%2C%5C%22rhr%5C%22%3A0%2C%5C%22ss%5C%22%3A0%7D%2C%5C%22stp%5C%22%3A%7B%5C%22ttl%5C%22%3A18272%2C%5C%22dis%5C%22%3A10627%2C%5C%22cal%5C%22%3A510%2C%5C%22wk%5C%22%3A41%2C%5C%22rn%5C%22%3A50%2C%5C%22runDist%5C%22%3A7654%2C%5C%22runCal%5C%22%3A397%2C%5C%22stage%5C%22%3A%5B%7B%5C%22start%5C%22%3A327%2C%5C%22stop%5C%22%3A341%2C%5C%22mode%5C%22%3A1%2C%5C%22dis%5C%22%3A481%2C%5C%22cal%5C%22%3A13%2C%5C%22step%5C%22%3A680%7D%2C%7B%5C%22start%5C%22%3A342%2C%5C%22stop%5C%22%3A367%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A2295%2C%5C%22cal%5C%22%3A95%2C%5C%22step%5C%22%3A2874%7D%2C%7B%5C%22start%5C%22%3A368%2C%5C%22stop%5C%22%3A377%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A1592%2C%5C%22cal%5C%22%3A88%2C%5C%22step%5C%22%3A1664%7D%2C%7B%5C%22start%5C%22%3A378%2C%5C%22stop%5C%22%3A386%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A1072%2C%5C%22cal%5C%22%3A51%2C%5C%22step%5C%22%3A1245%7D%2C%7B%5C%22start%5C%22%3A387%2C%5C%22stop%5C%22%3A393%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A1036%2C%5C%22cal%5C%22%3A57%2C%5C%22step%5C%22%3A1124%7D%2C%7B%5C%22start%5C%22%3A394%2C%5C%22stop%5C%22%3A398%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A488%2C%5C%22cal%5C%22%3A19%2C%5C%22step%5C%22%3A607%7D%2C%7B%5C%22start%5C%22%3A399%2C%5C%22stop%5C%22%3A414%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A2220%2C%5C%22cal%5C%22%3A120%2C%5C%22step%5C%22%3A2371%7D%2C%7B%5C%22start%5C%22%3A415%2C%5C%22stop%5C%22%3A427%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A1268%2C%5C%22cal%5C%22%3A59%2C%5C%22step%5C%22%3A1489%7D%2C%7B%5C%22start%5C%22%3A428%2C%5C%22stop%5C%22%3A433%2C%5C%22mode%5C%22%3A1%2C%5C%22dis%5C%22%3A152%2C%5C%22cal%5C%22%3A4%2C%5C%22step%5C%22%3A238%7D%2C%7B%5C%22start%5C%22%3A434%2C%5C%22stop%5C%22%3A444%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A2295%2C%5C%22cal%5C%22%3A95%2C%5C%22step%5C%22%3A2874%7D%2C%7B%5C%22start%5C%22%3A445%2C%5C%22stop%5C%22%3A455%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A1592%2C%5C%22cal%5C%22%3A88%2C%5C%22step%5C%22%3A1664%7D%2C%7B%5C%22start%5C%22%3A456%2C%5C%22stop%5C%22%3A466%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A1072%2C%5C%22cal%5C%22%3A51%2C%5C%22step%5C%22%3A1245%7D%2C%7B%5C%22start%5C%22%3A467%2C%5C%22stop%5C%22%3A477%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A1036%2C%5C%22cal%5C%22%3A57%2C%5C%22step%5C%22%3A1124%7D%2C%7B%5C%22start%5C%22%3A478%2C%5C%22stop%5C%22%3A488%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A488%2C%5C%22cal%5C%22%3A19%2C%5C%22step%5C%22%3A607%7D%2C%7B%5C%22start%5C%22%3A489%2C%5C%22stop%5C%22%3A499%2C%5C%22mode%5C%22%3A4%2C%5C%22dis%5C%22%3A2220%2C%5C%22cal%5C%22%3A120%2C%5C%22step%5C%22%3A2371%7D%2C%7B%5C%22start%5C%22%3A500%2C%5C%22stop%5C%22%3A511%2C%5C%22mode%5C%22%3A3%2C%5C%22dis%5C%22%3A1268%2C%5C%22cal%5C%22%3A59%2C%5C%22step%5C%22%3A1489%7D%2C%7B%5C%22start%5C%22%3A512%2C%5C%22stop%5C%22%3A522%2C%5C%22mode%5C%22%3A1%2C%5C%22dis%5C%22%3A152%2C%5C%22cal%5C%22%3A4%2C%5C%22step%5C%22%3A238%7D%5D%7D%2C%5C%22goal%5C%22%3A8000%2C%5C%22tz%5C%22%3A%5C%2228800%5C%22%7D%22%2C%22source%22%3A24%2C%22type%22%3A0%7D%5D&#39;      finddate = re.compile(r&#39;.*?date%22%3A%22(.*?)%22%2C%22data.*?&#39;)    findstep = re.compile(r&#39;.*?ttl%5C%22%3A(.*?)%2C%5C%22dis.*?&#39;)    data_json = re.sub(finddate.findall(data_json)[0], today, str(data_json))    data_json = re.sub(findstep.findall(data_json)[0], step, str(data_json))          url = f&#39;https://api-mifit-cn.huami.com/v1/data/band_data.json?&amp;t=&#123;t&#125;&#39;    head = &#123;        &quot;apptoken&quot;: app_token,        &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;        &#125;          data = f&#39;userid=&#123;userid&#125;&amp;last_sync_data_time=1597306380&amp;device_type=0&amp;last_deviceid=DA932FFFFE8816E7&amp;data_json=&#123;data_json&#125;&#39;         response = requests.post(url, data=data, headers=head).json()    #print(response)    result = f&quot;&#123;user[:4]&#125;****&#123;user[-4:]&#125;: [&#123;now&#125;] 修改步数（&#123;step&#125;）&quot;+ response[&#39;message&#39;]    print(result)    return result   #获取时间戳def get_time():    url = &#39;http://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp&#39;    response = requests.get(url,headers=headers).json()    t = response[&#39;data&#39;][&#39;t&#39;]    return t   #获取app_tokendef get_app_token(login_token):    url = f&quot;https://account-cn.huami.com/v1/client/app_tokens?app_name=com.xiaomi.hm.health&amp;dn=api-user.huami.com%2Capi-mifit.huami.com%2Capp-analytics.huami.com&amp;login_token=&#123;login_token&#125;&quot;    response = requests.get(url,headers=headers).json()    app_token = response[&#39;token_info&#39;][&#39;app_token&#39;]    #print(&quot;app_token获取成功！&quot;)    #print(app_token)    return app_token # 推送server酱def push_wx(sckey, desp=&quot;&quot;):    &quot;&quot;&quot;    推送消息到微信    &quot;&quot;&quot;    if sckey == &#39;&#39;:        print(&quot;[注意] 未提供sckey，不进行推送！&quot;)    else:        server_url = f&quot;https://sc.ftqq.com/&#123;sckey&#125;.send&quot;        params = &#123;            &quot;text&quot;: &#39;小米运动 步数修改&#39;,            &quot;desp&quot;: desp        &#125;          response = requests.get(server_url, params=params)        json_data = response.json()          if json_data[&#39;errno&#39;] == 0:            print(f&quot;[&#123;now&#125;] 推送成功。&quot;)        else:            print(f&quot;[&#123;now&#125;] 推送失败：&#123;json_data[&#39;errno&#39;]&#125;(&#123;json_data[&#39;errmsg&#39;]&#125;)&quot;) # 推送serverdef push_server(sckey, desp=&quot;&quot;):    &quot;&quot;&quot;    推送消息到微信    &quot;&quot;&quot;    if sckey == &#39;&#39;:        print(&quot;[注意] 未提供sckey，不进行微信推送！&quot;)    else:        server_url = f&quot;https://sctapi.ftqq.com/&#123;sckey&#125;.send&quot;        params = &#123;            &quot;title&quot;: &#39;小米运动 步数修改&#39;,            &quot;desp&quot;: desp        &#125;          response = requests.get(server_url, params=params)        json_data = response.json()          if json_data[&#39;code&#39;] == 0:            print(f&quot;[&#123;now&#125;] 推送成功。&quot;)        else:            print(f&quot;[&#123;now&#125;] 推送失败：&#123;json_data[&#39;code&#39;]&#125;(&#123;json_data[&#39;message&#39;]&#125;)&quot;) # 推送pushplusdef push_pushplus(token, content=&quot;ff56035d64d14a0a91b494f671fe0353&quot;):    &quot;&quot;&quot;    推送消息到pushplus    &quot;&quot;&quot;    if token == &#39;&#39;:        print(&quot;[注意] 未提供token，不进行pushplus推送！&quot;)    else:        server_url = f&quot;http://www.pushplus.plus/send&quot;        params = &#123;            &quot;token&quot;: token,            &quot;title&quot;: &#39;小米运动 步数修改&#39;,            &quot;content&quot;: content        &#125;          response = requests.get(server_url, params=params)        json_data = response.json()          if json_data[&#39;code&#39;] == 200:            print(f&quot;[&#123;now&#125;] 推送成功。&quot;)        else:            print(f&quot;[&#123;now&#125;] 推送失败：&#123;json_data[&#39;code&#39;]&#125;(&#123;json_data[&#39;message&#39;]&#125;)&quot;) # 推送tgdef push_tg(token, chat_id, desp=&quot;&quot;):    &quot;&quot;&quot;    推送消息到TG    &quot;&quot;&quot;    if token == &#39;&#39;:        print(&quot;[注意] 未提供token，不进行tg推送！&quot;)    elif chat_id == &#39;&#39;:        print(&quot;[注意] 未提供chat_id，不进行tg推送！&quot;)    else:        server_url = f&quot;https://api.telegram.org/bot&#123;token&#125;/sendmessage&quot;        params = &#123;            &quot;text&quot;: &#39;小米运动 步数修改\n\n&#39; + desp,            &quot;chat_id&quot;: chat_id        &#125;          response = requests.get(server_url, params=params)        json_data = response.json()          if json_data[&#39;ok&#39;] == True:            print(f&quot;[&#123;now&#125;] 推送成功。&quot;)        else:            print(f&quot;[&#123;now&#125;] 推送失败：&#123;json_data[&#39;error_code&#39;]&#125;(&#123;json_data[&#39;description&#39;]&#125;)&quot;)# 企业微信推送def wxpush(msg, usr, corpid, corpsecret, agentid=1000002):    base_url = &#39;https://qyapi.weixin.qq.com/cgi-bin/gettoken?&#39;    req_url = &#39;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#39;    corpid = corpid    corpsecret = corpsecret    agentid = agentid     if agentid == 0:        agentid = 1000002     #获取access_token，每次的access_token都不一样，所以需要运行一次请求一次    def get_access_token(base_url, corpid, corpsecret):        urls = base_url + &#39;corpid=&#39; + corpid + &#39;&amp;corpsecret=&#39; + corpsecret        resp = requests.get(urls).json()        access_token = resp[&#39;access_token&#39;]        return access_token     def send_message(msg, usr):        data = get_message(msg, usr)        req_urls = req_url + get_access_token(base_url, corpid, corpsecret)        res = requests.post(url=req_urls, data=data)        ret = res.json()        if ret[&quot;errcode&quot;] == 0:            print(f&quot;[&#123;now&#125;] 企业微信推送成功&quot;)        else:            print(f&quot;[&#123;now&#125;] 推送失败：&#123;ret[&#39;errcode&#39;]&#125; 错误信息：&#123;ret[&#39;errmsg&#39;]&#125;&quot;)     def get_message(msg, usr):        data = &#123;            &quot;touser&quot;: usr,            &quot;toparty&quot;: &quot;@all&quot;,            &quot;totag&quot;: &quot;@all&quot;,            &quot;msgtype&quot;: &quot;text&quot;,            &quot;agentid&quot;: agentid,            &quot;text&quot;: &#123;                &quot;content&quot;: msg            &#125;,            &quot;safe&quot;: 0,            &quot;enable_id_trans&quot;: 0,            &quot;enable_duplicate_check&quot;: 0,            &quot;duplicate_check_interval&quot;: 1800        &#125;        data = json.dumps(data)        return data     msg = msg    usr = usr    if corpid == &#39;&#39;:        print(&quot;[注意] 未提供corpid，不进行企业微信推送！&quot;)    elif corpsecret == &#39;&#39;:        print(&quot;[注意] 未提供corpsecret，不进行企业微信推送！&quot;)    else:        send_message(msg, usr) if __name__ ==  &quot;__main__&quot;:    # Push Mode    Pm = &quot;off&quot;    if Pm == &#39;wx&#39; or Pm == &#39;nwx&#39;:        # ServerChan        sckey = input()        if str(sckey) == &#39;0&#39;:            sckey = &#39;&#39;    elif Pm == &#39;tg&#39;:        token = input()        sl = token.split(&#39;@&#39;)        if len(sl) != 2:            print(&#39;tg推送参数有误！&#39;)    elif Pm == &#39;qwx&#39;:        token = input()        sl = token.split(&#39;-&#39;)        if len(sl) &lt; 3:            print(&#39;企业微信推送参数有误！&#39;)    elif Pm == &#39;pp&#39;:        token = input()        if token == &#39;&#39;:            print(&#39;pushplus token错误&#39;)    elif Pm == &#39;off&#39;:        print(&#39;不推送&#39;)    else:        print(&#39;推送选项有误！&#39;)        exit(0)     # 用户名（格式为 1**********）    user = &quot;手机号&quot;    # 登录密码    passwd = &quot;密码&quot;    # 要修改的步数，直接输入想要修改的步数值，留空为随机步数    step =&quot;54321-65432&quot;     user_list = user.split(&#39;#&#39;)    passwd_list = passwd.split(&#39;#&#39;)    setp_array = step.split(&#39;-&#39;)     if len(user_list) == len(passwd_list):        push = &#39;&#39;        for line in range(0,len(user_list)):            if len(setp_array) == 2:                step = str(random.randint(int(setp_array[0]),int(setp_array[1])))                print (f&quot;已设置为随机步数（&#123;setp_array[0]&#125;-&#123;setp_array[1]&#125;）&quot;)            elif str(step) == &#39;0&#39;:                step = &#39;&#39;            push += main(user_list[line], passwd_list[line], step) + &#39;\n&#39;        if Pm == &#39;wx&#39;:            push_wx(sckey, push)        elif Pm == &#39;nwx&#39;:            push_server(sckey, push)        elif Pm == &#39;tg&#39;:            push_tg(sl[0], sl[1], push)        elif Pm == &#39;qwx&#39;:            if len(sl) == 4:                wxpush(push, sl[0], sl[1], sl[2], int(sl[3]))            else:                wxpush(push, sl[0], sl[1], sl[2])        elif Pm == &#39;pp&#39;:            push_pushplus(token, push)        elif Pm == &#39;off&#39;:            pass    else:        print(&#39;用户名和密码数量不对&#39;)    </code></pre><h2 id="成品"><a href="#成品" class="headerlink" title="成品"></a>成品</h2><p><a href="http://pan.cyblh.top/61189777.zip">运动步数修改</a></p><blockquote><p>解压密码为123</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 资源整理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 步数修改 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
